<script>
    $(document).ready(function () {
        // var secureYields = [0.05, 0.09, 0.07, 0.05, 0.07];
        // console.log(secureYields.length);

        // var securePercentages = [15, 30, 15, 10, 30];
        var secureYields = [0.04, 0.07, 0.07, 0.05];
        console.log(secureYields.length);

        var securePercentages = [65, 10, 5, 20];

        // Resetting all values
        for (var i = 0; i < secureYields.length; i++) {
            $('.ligne' + (i + 2) + ' .colonne3 #AssuVie_30ans').text(0);
            $('.ligne' + (i + 2) + ' .colonne4 #AssuVie_30ans').text(0);
            $('.ligne' + (i + 2) + ' .colonne5 #AssuVie_30ans').text(0);
            $('.tableau .ligne' + (i + 2) + ' .colonne2 #AssuVie_30ans').text(parseInt(secureYields[i] * 100) + " %");
            $('.total.ligne6 .colonne2 #AssuVie_30ans').text('4,65 %');

            // For mobile
            $('.tableau-simulateur-mobile-div .carte-responsive:nth-child(' + (i + 1) + ') .capital .h5-mobile.scale300').text(0);
            $('.capitol-total').text(0);
            $('.tableau-simulateur-mobile-div .carte-responsive:nth-child(' + (i + 1) + ') .rendement .h5-mobile.scale300').text(parseInt(secureYields[i] * 100) + " %");
            $('.rendement-total').text('4,65 %');
        }


        // ************************************************************************************************************
        // ************************************************************************************************************
        // When discover button is clicked
        $('#discover').click(function (e) {
            e.preventDefault();
            // Assigning values to variables
            var initAmount = $('#apport-initial').val();
            var monthlyAmount = $('#apport-mensuel').val();
            console.log(initAmount + ", " + monthlyAmount);

            // Create a function for the mathematical formula
            function calculateValues(yield, percentage, noOfYears) {
                return (initAmount*(percentage/100)*(((1+(yield/12))**(noOfYears*12)))+(monthlyAmount*(percentage/100)*(((1+(yield/12))**(noOfYears*12)-1))/(yield/12))).toFixed(2);
                // return ((initAmount * ((1 + (yield/12)) ** (noOfYears*12))) + ((monthlyAmount * (((((1 + (yield/12)) ** (noOfYears*12))) - 1)) / (yield/12)))).toFixed(2);
                // var addToYield = 1 + (yield/12);
                // console.log("addToYielf: " + addToYield);
                // var multipleByTwelve = noOfYears * 12;
                // console.log("MultiplyByTwelve: " + multipleByTwelve);
                // var raisedToPower = addToYield**multipleByTwelve;
                // console.log("rasiedToPower: " + raisedToPower);
                // var leftSide = initAmount * raisedToPower;
                // return leftSide;
            }

            console.log(calculateValues(0.05, 15, 10));

            // For 10 years
            for (var i = 0; i < secureYields.length; i++) {
                $('.tableau .ligne' + (i + 2) + ' .colonne3 #AssuVie_30ans').text(calculateValues(secureYields[i], securePercentages[i], 10));

                // For mobile
                $('[data-w-tab="Tab 1"] .tableau-simulateur-mobile-div .carte-responsive:nth-child(' + (i + 1) + ') .capital .h5-mobile.scale300').text(calculateValues(secureYields[i], securePercentages[i], 10));
            }

            // Total for 10 years
            var total = 0;
            for (var i = 0; i < secureYields.length; i++) {
                var lineValue = $('.tableau .ligne' + (i + 2) + ' .colonne3 #AssuVie_30ans').text();
                total += parseFloat(lineValue);
            }
            $('.total.ligne6 .colonne3 #AssuVie_30ans').text(total.toFixed(2));
            $('[data-w-tab="Tab 1"] .capitol-total').text(total.toFixed(2));


            // For 20 years
            for (var i = 0; i < secureYields.length; i++) {
                $('.tableau .ligne' + (i + 2) + ' .colonne4 #AssuVie_30ans').text(calculateValues(secureYields[i], securePercentages[i], 20));

                // For mobile
                $('[data-w-tab="Tab 2"] .tableau-simulateur-mobile-div .carte-responsive:nth-child(' + (i + 1) + ') .capital .h5-mobile.scale300').text(calculateValues(secureYields[i], securePercentages[i], 20));
            }

            // Total for 20 years
            var total = 0;
            for (var i = 0; i < secureYields.length; i++) {
                var lineValue = $('.tableau .ligne' + (i + 2) + ' .colonne4 #AssuVie_30ans').text();
                total += parseFloat(lineValue);
            }
            $('.total.ligne6 .colonne4 #AssuVie_30ans').text(total.toFixed(2));
            $('[data-w-tab="Tab 2"] .capitol-total').text(total.toFixed(2));

            // For 30 years
            for (var i = 0; i < secureYields.length; i++) {
                $('.tableau .ligne' + (i + 2) + ' .colonne5 #AssuVie_30ans').text(calculateValues(secureYields[i], securePercentages[i], 30));

                // For mobile
                $('[data-w-tab="Tab 3"] .tableau-simulateur-mobile-div .carte-responsive:nth-child(' + (i + 1) + ') .capital .h5-mobile.scale300').text(calculateValues(secureYields[i], securePercentages[i], 30));
            }

            // Total for 20 years
            var total = 0;
            for (var i = 0; i < secureYields.length; i++) {
                var lineValue = $('.tableau .ligne' + (i + 2) + ' .colonne5 #AssuVie_30ans').text();
                total += parseFloat(lineValue);
            }
            $('.total.ligne6 .colonne5 #AssuVie_30ans').text(total.toFixed(2));
            $('[data-w-tab="Tab 3"] .capitol-total').text(total.toFixed(2));

            $('#total-gain').text(calculateValues(0.02, 100, 20));
        })
    })
</script>